Improve error handling in api

Date: 2024-04-11 16:49:54