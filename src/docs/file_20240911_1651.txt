Improve error handling in api

Date: 2024-09-11 16:51:29