Improve error handling in api

Date: 2024-08-21 17:40:58